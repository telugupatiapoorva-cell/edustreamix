<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>EDUSTREAMIX | B.Com</title>
<link rel="stylesheet" href="style.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<!-- Splash Screen -->
<div id="splash">
    <h1>ğŸ“ EDUSTREAMIX</h1>
    <p>Smart Learning Platform</p>
</div>

<div class="app-container" id="app" style="display:none;">

<header class="app-header">
<h1>EDUSTREAMIX</h1>
<p>Smart B.Com Learning</p>
</header>

<div class="nav-buttons">
    <button onclick="goBack()">â¬… Back</button>
    <button onclick="exitApp()">âŒ Exit</button>
</div>

<div id="groups" class="screen active"></div>
<div id="subjects" class="screen"></div>
<div id="channels" class="screen"></div>
<div id="links" class="screen"></div>

</div>

<script src="data.js"></script>

<script>

const groupsDiv = document.getElementById("groups");
const subjectsDiv = document.getElementById("subjects");
const channelsDiv = document.getElementById("channels");
const linksDiv = document.getElementById("links");

const screens = document.querySelectorAll(".screen");
let currentScreen = groupsDiv;

/* Splash */
setTimeout(()=>{
    document.getElementById("splash").style.display="none";
    document.getElementById("app").style.display="flex";
},2000);

function switchScreen(screen){
    screens.forEach(s=>s.classList.remove("active"));
    screen.classList.add("active");
    currentScreen = screen;
}

function goBack(){
    if(currentScreen === linksDiv) switchScreen(channelsDiv);
    else if(currentScreen === channelsDiv) switchScreen(subjectsDiv);
    else if(currentScreen === subjectsDiv) switchScreen(groupsDiv);
}

function exitApp(){
    if(confirm("Do you want to exit EDUSTREAMIX?")){
        window.close();
    }
}

function createCard(text, icon, clickFn){
    let card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
        <div class="icon">${icon}</div>
        <div class="title">${text}</div>
    `;
    card.onclick = clickFn;
    return card;
}

function getSubjectIcon(name){
    if(name.toLowerCase().includes("english")) return "ğŸ“˜";
    if(name.toLowerCase().includes("telugu")) return "ğŸ“—";
    if(name.toLowerCase().includes("hindi")) return "ğŸ“™";
    if(name.toLowerCase().includes("sanskrit")) return "ğŸ“•";
    if(name.toLowerCase().includes("accounting")) return "ğŸ“Š";
    if(name.toLowerCase().includes("gst")) return "ğŸ’¼";
    if(name.toLowerCase().includes("research")) return "ğŸ“";
    if(name.toLowerCase().includes("finance")) return "ğŸ’°";
    if(name.toLowerCase().includes("cyber")) return "ğŸ›¡";
    if(name.toLowerCase().includes("technology")) return "ğŸ’»";
    return "ğŸ“";
}

function showSubjects(group){
    subjectsDiv.innerHTML = "<h2>Select Subject</h2>";
    data[group].forEach(sub=>{
        subjectsDiv.appendChild(
            createCard(sub.name, getSubjectIcon(sub.name), ()=>showChannels(sub))
        );
    });
    switchScreen(subjectsDiv);
}

function showChannels(subject){
    channelsDiv.innerHTML = "<h2>Select Channel</h2>";
    subject.channels.forEach(channel=>{
        channelsDiv.appendChild(
            createCard(channel.name, "ğŸ“º", ()=>showLinks(channel))
        );
    });
    switchScreen(channelsDiv);
}

function showLinks(channel){
    linksDiv.innerHTML = "<h2>Open Channel</h2>";
    channel.links.forEach(link=>{
        let a = document.createElement("a");
        a.href = link;
        a.target = "_blank";
        a.className = "playlist-btn";
        a.innerText = "â–¶ Open YouTube Channel";
        linksDiv.appendChild(a);
    });
    switchScreen(linksDiv);
}

window.onload = function(){
    groupsDiv.innerHTML = "<h2>Select Group</h2>";
    for(let group in data){
        let cleanName = group.replace(" - Semester 6","");
        groupsDiv.appendChild(
            createCard(cleanName, "ğŸ“", ()=>showSubjects(group))
        );
    }
};

</script>

</body>
</html>
